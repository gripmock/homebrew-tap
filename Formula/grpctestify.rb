# typed: false
# frozen_string_literal: true

# This file was generated by GitHub Actions. DO NOT EDIT.
class Grpctestify < Formula
  desc "gRPC testing utility written in Rust"
  homepage "https://github.com/gripmock/grpctestify-rust"
  version "1.3.6"
  license "MIT"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/gripmock/grpctestify-rust/releases/download/v1.3.6/grpctestify-macos-amd64.tar.gz"
      sha256 "7970605709da0711abeb9f0e5bfe17e3361dc08aa8b467f9ae0c26886e64d7ea"

      def install
        bin.install "grpctestify"
      end
    end

    if Hardware::CPU.arm?
      url "https://github.com/gripmock/grpctestify-rust/releases/download/v1.3.6/grpctestify-macos-arm64.tar.gz"
      sha256 "f7856e428bd26768a54d572dd5fc42091eadf5ed88a960bdde7928394ac9bed8"

      def install
        bin.install "grpctestify"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/gripmock/grpctestify-rust/releases/download/v1.3.6/grpctestify-linux-amd64.tar.gz"
      sha256 "3756a6cc05f57c9c9d4d1ef52a9ddb5045dadf9d5a3b3f9850327f248a0ca44b"

      def install
        bin.install "grpctestify"
      end
    end

    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/gripmock/grpctestify-rust/releases/download/v1.3.6/grpctestify-linux-arm64.tar.gz"
      sha256 "b62aa7ebf981e5e0493e16e4b4a911dafe14a71eef014473a9f924871e907303"

      def install
        bin.install "grpctestify"
      end
    end
  end

  deprecate! date: "2027-12-31", because: "moved to cask. Please run "

  def caveats
    <<~EOS
      The 'grpctestify' formula is deprecated and will be removed in future versions.
      Please migrate to the cask version:
        brew uninstall grpctestify
        brew install --cask grpctestify
    EOS
  end

  test do
    assert_match "#{version}", shell_output("#{bin}/grpctestify --version")
  end
end
