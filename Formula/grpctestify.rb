# typed: false
# frozen_string_literal: true

# This file was generated by GitHub Actions. DO NOT EDIT.
class Grpctestify < Formula
  desc "gRPC testing utility written in Rust"
  homepage "https://github.com/gripmock/grpctestify-rust"
  version "1.4.0"
  license "MIT"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/gripmock/grpctestify-rust/releases/download/v1.4.0/grpctestify-macos-amd64.tar.gz"
      sha256 "60ecba506e5d10fc3b562cc69fbd93abf91f221cf51f04dd3c62108a5e1a3014"

      def install
        bin.install "grpctestify"
      end
    end

    if Hardware::CPU.arm?
      url "https://github.com/gripmock/grpctestify-rust/releases/download/v1.4.0/grpctestify-macos-arm64.tar.gz"
      sha256 "be70c5338e12e9f5c12a907fb91ec3e778dffdb46c1b8da943d70de3627df972"

      def install
        bin.install "grpctestify"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/gripmock/grpctestify-rust/releases/download/v1.4.0/grpctestify-linux-amd64.tar.gz"
      sha256 "c1418e4e8e7332d196e75fc20af8e231e5d5fa708c85f05ffd1490fb0f753328"

      def install
        bin.install "grpctestify"
      end
    end

    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/gripmock/grpctestify-rust/releases/download/v1.4.0/grpctestify-linux-arm64.tar.gz"
      sha256 "1617cad3a6a06dba93c968e813971ea85974ca6d89c5d811c2a1a283f5378104"

      def install
        bin.install "grpctestify"
      end
    end
  end

  deprecate! date: "2027-12-31", because: "moved to cask. Please run "

  def caveats
    <<~EOS
      The 'grpctestify' formula is deprecated and will be removed in future versions.
      Please migrate to the cask version:
        brew uninstall grpctestify
        brew install --cask grpctestify
    EOS
  end

  test do
    assert_match "#{version}", shell_output("#{bin}/grpctestify --version")
  end
end
